(this["webpackJsonpmaps-of-venice"]=this["webpackJsonpmaps-of-venice"]||[]).push([[0],{281:function(e,t){},463:function(e,t,a){e.exports=a(720)},468:function(e,t,a){},477:function(e,t){},719:function(e,t,a){},720:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(121),i=a.n(o),c=(a(468),a(410)),l=a(772),u=a(45);function s(e){return{type:"UPDATE_SELECTED_MAP",data:e}}var p=a(406),f=(a(473),a(476).initializeApp({apiKey:"AIzaSyBDQwZv9AJ40kjtWTVfjLjyMn3dSJMuiQI",authDomain:"maps-of-venice.firebaseapp.com",databaseURL:"https://maps-of-venice.firebaseio.com",projectId:"maps-of-venice",storageBucket:"maps-of-venice.appspot.com",messagingSenderId:"1004145915620",appId:"1:1004145915620:web:bb706ab87a353cf8eb5ef1",measurementId:"G-CYE960RYD9"}).firestore());function d(){var e=Object(u.b)();return Object(n.useEffect)((function(){f.collection("maps").orderBy("year").get().then((function(t){var a=t.docs.map((function(e){return e.data()}));e(function(e){return{type:"UPDATE_MAPS",data:e}}(a))})),f.collection("population").orderBy("year").get().then((function(t){var a=t.docs.map((function(e){return e.data()}));e(function(e){return{type:"UPDATE_POPULATION",data:e}}(a))})),fetch("https://api.github.com/gists/aa98d983dc8392db28e710e1c888033f").then((function(e){return e.json()})).then((function(t){return e({type:"UPDATE_GEOJSON",data:JSON.parse(t.files["map.geojson"].content)})}))}),[e]),null}var m=a(775),b=a(781),v=a(774);var g={latitude:45.437545,longitude:12.333794,zoom:13,minZoom:10,pitch:0,bearing:0},y=a(764),E=a(762),h=Object(E.a)({title:{color:"#FFFFFF",fontFamily:"Avenir",fontSize:12},body:{color:"#FFFFFF",fontFamily:"Avenir",fontSize:10}});function O(){var e=Object(u.c)((function(e){return e})).hoveredObj,t=h();return r.a.createElement(r.a.Fragment,null,e.obj&&r.a.createElement("div",{style:{backgroundColor:"rgba(46, 46, 46, 0.8)",padding:8,position:"absolute",top:e.y,left:e.x}},r.a.createElement(y.a,{classes:{root:t.title}},e.obj.properties.name," (",e.obj.properties.year,")")))}function j(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})),a=t.maps,n=t.selectedMap,o=t.opacity,i=t.visible,c=t.geojson,s=function(t){var a=t.x,r=t.y,o=t.object;(!o||o.properties.year<=n)&&e({type:"UPDATE_HOVERED_OBJ",data:{x:a,y:r,obj:o}})};return r.a.createElement("div",null,r.a.createElement(l.a,{initialViewState:g,controller:{dragRotate:!1},layers:function(e){var t=e.data,a=e.currentYear,n=e.opacity,r=e.visible,o=e.geojson,i=e.onHover,c=[],l=function(){var e=t[u].tile,o=[0,1,2,3].map((function(t){return e.replace("https://maps.georeferencer.com/georeferences/","https://maps-".concat(t,".georeferencer.com//georeferences/"))}));c.push(new m.a({id:u,data:o,visible:r&&t[u].year===a,minZoom:0,maxZoom:19,tileSize:256,opacity:n,renderSubLayers:function(e){var t=e.tile.bbox,a=t.west,r=t.south,o=t.east,i=t.north;return new b.a(e,{data:null,image:e.data,bounds:[a,r,o,i],opacity:n})}}))};for(var u in t)l();return Object.keys(o).length>0&&c.push(new v.a({id:"geojson",data:o,pickable:!0,getFillColor:function(e){return e.properties.year<=a?[255,255,0,50]:[0,0,0,0]},getLineColor:[255,255,0,100],getLineWidth:function(e){return e.properties.year<=a?2:0},lineWidthUnits:"pixels",onHover:i,updateTriggers:{getLineWidth:a,getFillColor:a}})),c}({data:a,currentYear:n,opacity:o,visible:i,geojson:c,onHover:s})},r.a.createElement(p.a,{mapboxApiAccessToken:"pk.eyJ1IjoieXpoZW5nMTk5OCIsImEiOiJjazhqM2d2c3EwMzdlM2dwanc0Nnc1bW5wIn0.zee4RAVq4YvHdnWIKGSZ-w"}),r.a.createElement(O,null)),r.a.createElement(d,null))}var F=a(293),A=a(780),T=a(71),S=a(390),w=Object(E.a)({subtitle:{color:"#FFFFFF",fontFamily:"Avenir",fontSize:14},title:{color:"#FFFFFF",fontFamily:"Avenir",fontSize:14,fontWeight:"Bold"}});function x(e){var t=w(),a=e.xFormatted,n=e.yFormatted;return r.a.createElement("div",{style:{backgroundColor:"rgba(46, 46, 46, 0.8)",padding:8}},r.a.createElement(y.a,{classes:{root:t.title}},a),r.a.createElement(y.a,{classes:{root:t.subtitle}},"Population: ",n))}function _(e){var t=[{id:"Population",data:Object(u.c)((function(e){return e})).population.map((function(e){return{x:e.year,y:e.population}}))}];return r.a.createElement("div",{style:{height:150,marginBottom:-13}},r.a.createElement(L,{data:t}))}var L=function(e){var t=e.data;return r.a.createElement(S.a,{data:t,margin:{top:0,bottom:0,right:0,left:0},xScale:{type:"linear",min:1603,max:1920},xFormat:".0f",yScale:{type:"linear",min:9e4,max:"auto",stacked:!0,reverse:!1},tooltip:function(e){var t=e.point.data;return r.a.createElement(x,t)},yFormat:".3s",axisTop:null,enableArea:!0,areaBaselineValue:9e4,areaOpacity:.15,lineWidth:2,axisRight:null,axisBottom:null,axisLeft:null,colors:"#17bdff",useMesh:!0,crosshairType:"bottom",enablePoints:!0,pointSize:5,pointBorderWidth:2,pointColor:"#FFFFFF",pointBorderColor:"#17bdff",enableGridX:!1,enableGridY:!1})},k=a(779),I=a(405),P=a.n(I),D=a(404),M=a.n(D),C=Object(T.a)({root:{color:"#ffffff",backgroundColor:"#17bdff",borderRadius:5,width:47,height:35,marginRight:36,marginBottom:34,"&:hover":{backgroundColor:"#3dc7ff"}}})(k.a);function G(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})),a=t.maps,o=t.selectedMap,i=t.playing,c=a.map((function(e){return e.year}));return Object(n.useEffect)((function(){var t=c.findIndex((function(e){return e===o}));if(i){var a=setTimeout((function(){return e(s(c[(t+1)%c.length]))}),500);return function(){return clearTimeout(a)}}}),[i,o,e,c]),r.a.createElement(C,{onClick:function(){e({type:"TOGGLE_PLAYING"})}},i?r.a.createElement(M.a,null):r.a.createElement(P.a,null))}var U=Object(T.a)({root:{color:"#17bdff",height:4},markLabel:{fontSize:14,fontFamily:"Avenir"},mark:{width:2,height:5,marginTop:-2}})(A.a);function B(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})),a=t.maps,n=t.selectedMap,o=a.map((function(e){return e.year})),i=Math.min.apply(Math,Object(F.a)(o)),c=Math.max.apply(Math,Object(F.a)(o)),l=a.map((function(e,t){return{value:e.year,label:t!==a.length-3&&(0===t||t===a.length-1||a[t-1].year<e.year-7)?e.year:""}}));return r.a.createElement("div",{style:{position:"absolute",bottom:40,marginLeft:"auto",marginRight:"auto",left:0,right:0,display:"flex",flexDirection:"row",alignItems:"flex-end",justifyContent:"center",width:"100%"}},r.a.createElement(G,null),r.a.createElement("div",{style:{display:"flex",alignSelf:"center",flexDirection:"column",width:"80%",marginRight:"5%"}},r.a.createElement(_,null),r.a.createElement(U,{value:n,onChange:function(t,a){return e(s(a))},valueLabelFormat:function(e){return e},valueLabelDisplay:"auto",min:i,max:c,step:null,marks:l,track:"normal"})))}var z=Object(T.a)({root:{color:"#17bdff",height:4}})(A.a);function R(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).opacity;return r.a.createElement("div",{style:{position:"absolute",top:40,right:40,display:"flex",width:100,height:30}},r.a.createElement(z,{value:Math.round(100*t),onChange:function(t,a){return e({type:"UPDATE_OPACITY",data:a/100})},getAriaValueText:function(e){return e},valueLabelFormat:function(e){return e},"aria-labelledby":"slider",valueLabelDisplay:"auto",min:0,max:100,marks:!0,track:"inverted"}))}var N=Object(T.a)({root:{fontSize:16,fontFamily:"Avenir"}})(y.a),V=Object(T.a)({root:{fontSize:20,fontFamily:"Avenir"}})(y.a);function W(){var e=Object(u.c)((function(e){return e})),t=e.maps,a=e.selectedMap,n=t.find((function(e){return e.year===a}));return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",{onClick:function(){return window.open(n.source,"_blank")},style:{position:"absolute",top:30,marginLeft:"auto",marginRight:"auto",left:0,right:0,width:"50%",backgroundColor:"rgb(255, 255, 255, .7)",border:".5px solid grey",borderRadius:"5px",padding:"2px",cursor:"pointer"}},r.a.createElement(V,null,n&&"".concat(n.creator," (").concat(n.origin&&"".concat(n.origin," ")).concat(n.year,")")),r.a.createElement(N,null,n&&n.title)))}var J=Object(T.a)({root:{fontSize:16,fontFamily:"Avenir"}})(y.a);function Y(e){var t=e.visible;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{style:{position:"absolute",top:30,left:40,width:"15%",backgroundColor:"rgb(255, 255, 255, .7)",border:".5px solid grey",borderRadius:"5px",padding:"2px"}},r.a.createElement(J,null,"Hold shift to compare with base map")))}function H(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).visible,a=Object(n.useState)(!0),o=Object(c.a)(a,2),i=o[0],l=o[1];return r.a.createElement("div",{onKeyDown:function(a){"Shift"===a.nativeEvent.key&&t&&(e({type:"TOGGLE_VISIBLE"}),l(!1))},onKeyUp:function(t){"Shift"===t.nativeEvent.key&&e({type:"TOGGLE_VISIBLE"})},onKeyPress:function(t){" "===t.key&&e({type:"TOGGLE_PLAYING"})}},r.a.createElement(j,null),r.a.createElement(W,null),r.a.createElement(Y,{visible:i}),r.a.createElement(B,null),r.a.createElement(R,null))}a(719);var X=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(H,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Z=a(209),K=a(117),q={maps:[],population:[],selectedMap:1603,opacity:1,visible:!0,geojson:{},hoveredObj:{},playing:!1};var Q=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),$=Object(Z.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MAPS":return Object(K.a)({},e,{maps:t.data});case"UPDATE_POPULATION":return Object(K.a)({},e,{population:t.data});case"UPDATE_SELECTED_MAP":return Object(K.a)({},e,{selectedMap:t.data});case"UPDATE_OPACITY":return Object(K.a)({},e,{opacity:t.data});case"TOGGLE_VISIBLE":return Object(K.a)({},e,{visible:!e.visible});case"UPDATE_GEOJSON":return Object(K.a)({},e,{geojson:t.data});case"UPDATE_HOVERED_OBJ":return Object(K.a)({},e,{hoveredObj:t.data});case"TOGGLE_PLAYING":return Object(K.a)({},e,{playing:!e.playing});default:return e}}),Q);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:$},r.a.createElement(X,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[463,1,2]]]);
//# sourceMappingURL=main.1a9c8faf.chunk.js.map