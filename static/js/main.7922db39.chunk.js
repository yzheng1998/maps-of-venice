(this["webpackJsonpmaps-of-venice"]=this["webpackJsonpmaps-of-venice"]||[]).push([[0],{251:function(e,t){},424:function(e,t,a){e.exports=a(680)},429:function(e,t,a){},438:function(e,t){},679:function(e,t,a){},680:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(127),i=a.n(o),c=(a(429),a(10)),l=a(728),u=a(40);var s=a(370),p=(a(434),a(437).initializeApp({apiKey:"AIzaSyBDQwZv9AJ40kjtWTVfjLjyMn3dSJMuiQI",authDomain:"maps-of-venice.firebaseapp.com",databaseURL:"https://maps-of-venice.firebaseio.com",projectId:"maps-of-venice",storageBucket:"maps-of-venice.appspot.com",messagingSenderId:"1004145915620",appId:"1:1004145915620:web:bb706ab87a353cf8eb5ef1",measurementId:"G-CYE960RYD9"}).firestore());function m(){var e=Object(u.b)();return Object(n.useEffect)((function(){p.collection("maps").orderBy("year").get().then((function(t){var a=t.docs.map((function(e){return e.data()}));e(function(e){return{type:"UPDATE_MAPS",data:e}}(a))})),p.collection("population").orderBy("year").get().then((function(t){var a=t.docs.map((function(e){return e.data()}));e(function(e){return{type:"UPDATE_POPULATION",data:e}}(a))})),fetch("https://api.github.com/gists/aa98d983dc8392db28e710e1c888033f").then((function(e){return e.json()})).then((function(t){return e({type:"UPDATE_GEOJSON",data:JSON.parse(t.files["map.geojson"].content)})}))}),[e]),null}var d=a(731),b=a(736),f=a(730);var v={latitude:45.437545,longitude:12.333794,zoom:13,minZoom:10,pitch:0,bearing:0},E=a(720),g=a(719),y=Object(g.a)({title:{color:"#FFFFFF",fontFamily:"Avenir",fontSize:12},body:{color:"#FFFFFF",fontFamily:"Avenir",fontSize:10}});function h(){var e=Object(u.c)((function(e){return e})).hoveredObj,t=y();return r.a.createElement(r.a.Fragment,null,e.obj&&r.a.createElement("div",{style:{backgroundColor:"rgba(46, 46, 46, 0.8)",padding:8,position:"absolute",top:e.y,left:e.x}},r.a.createElement(E.a,{classes:{root:t.title}},e.obj.properties.name," (",e.obj.properties.year,")")))}function O(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})),a=t.maps,n=t.selectedMap,o=t.opacity,i=t.visible,c=t.geojson,p=function(t){var a=t.x,r=t.y,o=t.object;(!o||o.properties.year<=n)&&e({type:"UPDATE_HOVERED_OBJ",data:{x:a,y:r,obj:o}})};return r.a.createElement("div",null,r.a.createElement(l.a,{initialViewState:v,controller:{dragRotate:!1},layers:function(e){var t=e.data,a=e.currentYear,n=e.opacity,r=e.visible,o=e.geojson,i=e.onHover,c=[],l=function(){var e=t[u].tile,o=[0,1,2,3].map((function(t){return e.replace("https://maps.georeferencer.com/georeferences/","https://maps-".concat(t,".georeferencer.com//georeferences/"))}));c.push(new d.a({id:u,data:o,visible:r&&t[u].year===a,minZoom:0,maxZoom:19,tileSize:256,opacity:n,renderSubLayers:function(e){var t=e.tile.bbox,a=t.west,n=t.south,r=t.east,o=t.north;return new b.a(e,{data:null,image:e.data,bounds:[a,n,r,o]})}}))};for(var u in t)l();return Object.keys(o).length>0&&c.push(new f.a({id:"geojson",data:o,pickable:!0,getFillColor:function(e){return e.properties.year<=a?[255,255,0,50]:[0,0,0,0]},getLineColor:[255,255,0,100],getLineWidth:function(e){return e.properties.year<=a?2:0},lineWidthUnits:"pixels",onHover:i,updateTriggers:{getLineWidth:a,getFillColor:a}})),c}({data:a,currentYear:n,opacity:o,visible:i,geojson:c,onHover:p})},r.a.createElement(s.a,{mapboxApiAccessToken:"pk.eyJ1IjoieXpoZW5nMTk5OCIsImEiOiJjazhqM2d2c3EwMzdlM2dwanc0Nnc1bW5wIn0.zee4RAVq4YvHdnWIKGSZ-w"}),r.a.createElement(h,null)),r.a.createElement(m,null))}var j=a(19),A=a(732),S=a(132),w=a(353);function T(e){var t=[{id:"Population",data:Object(u.c)((function(e){return e})).population.map((function(e){return{x:e.year,y:e.population}}))}];return r.a.createElement("div",{style:{height:150,marginBottom:-13}},r.a.createElement(_,{data:t}))}var _=function(e){var t=e.data;return r.a.createElement(w.a,{data:t,margin:{top:0,bottom:0,right:0,left:0},xScale:{type:"linear",min:1603,max:1920},xFormat:".0f",yScale:{type:"linear",min:9e4,max:"auto",stacked:!0,reverse:!1},yFormat:".3s",axisTop:null,enableArea:!0,areaBaselineValue:9e4,lineWidth:2,enableSlices:"x",axisRight:null,axisBottom:null,axisLeft:null,colors:"#17bdff",enablePoints:!1,enableGridX:!1,enableGridY:!1,crosshairType:"bottom"})},x=Object(S.a)({root:{color:"#17bdff",height:4},markLabel:{fontSize:14,fontFamily:"Avenir"},mark:{width:2,height:5,marginTop:-2}})(A.a);function D(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).maps,a=t.map((function(e){return e.year})),n=Math.min.apply(Math,Object(j.a)(a)),o=Math.max.apply(Math,Object(j.a)(a)),i=t.map((function(e,a){return{value:e.year,label:a!==t.length-3&&(0===a||a===t.length-1||t[a-1].year<e.year-7)?e.year:""}}));return r.a.createElement("div",{style:{position:"absolute",bottom:200,marginLeft:"auto",marginRight:"auto",left:0,right:0,display:"flex",flexDirection:"column",width:"80%",height:30}},r.a.createElement(T,null),r.a.createElement(x,{defaultValue:1603,onChange:function(t,a){return e({type:"UPDATE_SELECTED_MAP",data:a})},valueLabelFormat:function(e){return e},valueLabelDisplay:"auto",min:n,max:o,step:null,marks:i,track:"normal"}))}var F=Object(S.a)({root:{color:"#17bdff",height:4}})(A.a);function L(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).opacity;return r.a.createElement("div",{style:{position:"absolute",top:40,right:40,display:"flex",width:100,height:30}},r.a.createElement(F,{value:Math.round(100*t),onChange:function(t,a){return e({type:"UPDATE_OPACITY",data:a/100})},getAriaValueText:function(e){return e},valueLabelFormat:function(e){return e},"aria-labelledby":"slider",valueLabelDisplay:"auto",min:0,max:100,marks:!0,track:"inverted"}))}var k=Object(S.a)({root:{fontSize:16,fontFamily:"Avenir"}})(E.a),I=Object(S.a)({root:{fontSize:20,fontFamily:"Avenir"}})(E.a);function P(){var e=Object(u.c)((function(e){return e})),t=e.maps,a=e.selectedMap,n=t.find((function(e){return e.year===a}));return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",{onClick:function(){return window.open(n.source,"_blank")},style:{position:"absolute",top:30,marginLeft:"auto",marginRight:"auto",left:0,right:0,width:"50%",backgroundColor:"rgb(255, 255, 255, .7)",border:".5px solid grey",borderRadius:"5px",padding:"2px",cursor:"pointer"}},r.a.createElement(I,null,n&&"".concat(n.creator," (").concat(n.origin&&"".concat(n.origin," ")).concat(n.year,")")),r.a.createElement(k,null,n&&n.title)))}var M=Object(S.a)({root:{fontSize:16,fontFamily:"Avenir"}})(E.a);function U(e){var t=e.visible;return r.a.createElement(r.a.Fragment,null,t&&r.a.createElement("div",{style:{position:"absolute",top:30,left:40,width:"15%",backgroundColor:"rgb(255, 255, 255, .7)",border:".5px solid grey",borderRadius:"5px",padding:"2px"}},r.a.createElement(M,null,"Hold shift to compare with base map")))}function C(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e})).visible,a=Object(n.useState)(!0),o=Object(c.a)(a,2),i=o[0],l=o[1];return r.a.createElement("div",{onKeyDown:function(a){"Shift"===a.nativeEvent.key&&t&&(e({type:"TOGGLE_VISIBLE"}),l(!1))},onKeyUp:function(t){"Shift"===t.nativeEvent.key&&e({type:"TOGGLE_VISIBLE"})}},r.a.createElement(O,null),r.a.createElement(P,null),r.a.createElement(U,{visible:i}),r.a.createElement(D,null),r.a.createElement(L,null))}a(679);var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(C,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(186),R=a(107),V={maps:[],population:[],selectedMap:1603,opacity:.8,visible:!0,geojson:{},hoveredObj:{}};var G=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),J=Object(z.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MAPS":return Object(R.a)({},e,{maps:t.data});case"UPDATE_POPULATION":return Object(R.a)({},e,{population:t.data});case"UPDATE_SELECTED_MAP":return Object(R.a)({},e,{selectedMap:t.data});case"UPDATE_OPACITY":return Object(R.a)({},e,{opacity:t.data});case"TOGGLE_VISIBLE":return Object(R.a)({},e,{visible:!e.visible});case"UPDATE_GEOJSON":return Object(R.a)({},e,{geojson:t.data});case"UPDATE_HOVERED_OBJ":return Object(R.a)({},e,{hoveredObj:t.data});default:return e}}),G);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(u.a,{store:J},r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[424,1,2]]]);
//# sourceMappingURL=main.7922db39.chunk.js.map