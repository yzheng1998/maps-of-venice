(this["webpackJsonpmaps-of-venice"]=this["webpackJsonpmaps-of-venice"]||[]).push([[0],{246:function(e,t){},416:function(e,t,a){e.exports=a(672)},421:function(e,t,a){},430:function(e,t){},671:function(e,t,a){},672:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),o=a(124),i=a.n(o),c=(a(421),a(717)),l=a(48),u=a(362);a(426);var m=a(429).initializeApp({apiKey:"AIzaSyBDQwZv9AJ40kjtWTVfjLjyMn3dSJMuiQI",authDomain:"maps-of-venice.firebaseapp.com",databaseURL:"https://maps-of-venice.firebaseio.com",projectId:"maps-of-venice",storageBucket:"maps-of-venice.appspot.com",messagingSenderId:"1004145915620",appId:"1:1004145915620:web:bb706ab87a353cf8eb5ef1",measurementId:"G-CYE960RYD9"}).firestore();function s(){var e=Object(l.b)();return Object(n.useEffect)((function(){m.collection("maps").orderBy("year").get().then((function(t){var a=t.docs.map((function(e){return e.data()}));e(function(e){return{type:"UPDATE_MAPS",data:e}}(a))})),m.collection("population").orderBy("year").get().then((function(t){var a=t.docs.map((function(e){return e.data()}));e(function(e){return{type:"UPDATE_POPULATION",data:e}}(a))}))}),[e]),null}var p=a(718),f=a(724);var d={latitude:45.437545,longitude:12.333794,zoom:13,minZoom:10,pitch:0,bearing:0};function b(){var e=Object(l.c)((function(e){return e})),t=e.maps,a=e.selectedMap,n=e.opacity;return r.a.createElement("div",null,r.a.createElement(c.a,{initialViewState:d,controller:!0,layers:function(e){var t=e.data,a=e.filter,n=e.opacity,r=[],o=function(){var e=t[i].tile,o=[0,1,2,3].map((function(t){return e.replace("https://maps.georeferencer.com/georeferences/","https://maps-".concat(t,".georeferencer.com//georeferences/"))}));r.push(new p.a({id:i,data:o,visible:t[i].year===a,minZoom:0,maxZoom:19,tileSize:256,opacity:n,renderSubLayers:function(e){var t=e.tile.bbox,a=t.west,n=t.south,r=t.east,o=t.north;return new f.a(e,{data:null,image:e.data,bounds:[a,n,r,o]})}}))};for(var i in t)o();return r}({data:t,filter:a,opacity:n})},r.a.createElement(u.a,{mapboxApiAccessToken:"pk.eyJ1IjoieXpoZW5nMTk5OCIsImEiOiJjazhqM2d2c3EwMzdlM2dwanc0Nnc1bW5wIn0.zee4RAVq4YvHdnWIKGSZ-w"})),r.a.createElement(s,null))}var h=a(19),v=a(720),E=a(128),y=a(348);function g(e){var t=[{id:"Population",data:Object(l.c)((function(e){return e})).population.map((function(e){return{x:e.year,y:e.population}}))}];return r.a.createElement("div",{style:{height:150,marginBottom:-13}},r.a.createElement(O,{data:t}))}var O=function(e){var t=e.data;return r.a.createElement(y.a,{data:t,margin:{top:0,bottom:0,right:0,left:0},xScale:{type:"linear",min:1603,max:1920},xFormat:".0f",yScale:{type:"linear",min:9e4,max:"auto",stacked:!0,reverse:!1},yFormat:".3s",axisTop:null,enableArea:!0,areaBaselineValue:9e4,lineWidth:2,enableSlices:"x",axisRight:null,axisBottom:null,axisLeft:null,colors:"#17bdff",enablePoints:!1,enableGridX:!1,enableGridY:!1,crosshairType:"bottom"})},w=Object(E.a)({root:{color:"#17bdff",height:4},markLabel:{fontSize:14},mark:{width:2,height:5,marginTop:-2}})(v.a);function j(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})).maps,a=t.map((function(e){return e.year})),n=Math.min.apply(Math,Object(h.a)(a)),o=Math.max.apply(Math,Object(h.a)(a)),i=t.map((function(e,a){return{value:e.year,label:a!==t.length-3&&(0===a||a===t.length-1||t[a-1].year<e.year-7)?e.year:""}}));return r.a.createElement("div",{style:{position:"absolute",bottom:200,marginLeft:"auto",marginRight:"auto",left:0,right:0,display:"flex",flexDirection:"column",width:"80%",height:30}},r.a.createElement(g,null),r.a.createElement(w,{defaultValue:1603,onChange:function(t,a){return e({type:"UPDATE_SELECTED_MAP",data:a})},valueLabelFormat:function(e){return e},valueLabelDisplay:"auto",min:n,max:o,step:null,marks:i,track:"normal"}))}var A=Object(E.a)({root:{color:"#17bdff",height:4}})(v.a);function T(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e})).opacity;return r.a.createElement("div",{style:{position:"absolute",top:40,right:40,display:"flex",width:100,height:30}},r.a.createElement(A,{value:Math.round(100*t),onChange:function(t,a){return e({type:"UPDATE_OPACITY",data:a/100})},getAriaValueText:function(e){return e},valueLabelFormat:function(e){return e},"aria-labelledby":"slider",valueLabelDisplay:"auto",min:0,max:100,marks:!0,track:"inverted"}))}var S=a(716),_=Object(E.a)({root:{fontSize:16}})(S.a),x=Object(E.a)({root:{fontSize:20}})(S.a);function D(){var e=Object(l.c)((function(e){return e})),t=e.maps,a=e.selectedMap,n=t.find((function(e){return e.year===a}));return r.a.createElement("div",{style:{position:"absolute",top:30,marginLeft:"auto",marginRight:"auto",left:0,right:0,width:"90%"}},r.a.createElement(x,null,n&&"".concat(n.creator," (").concat(n.origin&&"".concat(n.origin," ")).concat(n.year,")")),r.a.createElement(_,null,n&&n.title))}function M(){return r.a.createElement("div",null,r.a.createElement(b,null),r.a.createElement(D,null),r.a.createElement(j,null),r.a.createElement(T,null))}a(671);var P=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var I=a(181),L=a(155),k={maps:[],population:[],selectedMap:1603,opacity:.8};var U=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),z=Object(I.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_MAPS":return Object(L.a)({},e,{maps:t.data});case"UPDATE_POPULATION":return Object(L.a)({},e,{population:t.data});case"UPDATE_SELECTED_MAP":return Object(L.a)({},e,{selectedMap:t.data});case"UPDATE_OPACITY":return Object(L.a)({},e,{opacity:t.data});default:return e}}),U);i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(l.a,{store:z},r.a.createElement(P,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[416,1,2]]]);
//# sourceMappingURL=main.3691063d.chunk.js.map